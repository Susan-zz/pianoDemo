<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>A Piano kit</title>
        <link rel="stylesheet" href="static/style.css">
    </head>
    <body>
        <div style="position:absolute; width:100%; height:100%; z-index:-1; left:0; top:0;"> 
            <img src="static/img/background4.jpg" height="100%" width="100%" style="left:0; top:0;"> 
        </div>
        <div class="pianoKeys">
                <div class="key" data-key="97">
                        <kbd>C1</kbd>
                        <div class="blackKey"></div>
                    </div>                   
                    <div class="key" data-key="98">
                        <kbd>D2</kbd>
                        <div class="blackKey"></div>
                    </div>
                    <div class="key" data-key="99">
                        <kbd>E3</kbd>
                    </div>
                    <div class="key" data-key="100">
                        <kbd>F4</kbd>
                        <div class="blackKey"></div>
                    </div>
                    <div class="key" data-key="101">
                        <kbd>G5</kbd>
                        <div class="blackKey"></div>
                    </div>
                    <div class="key" data-key="102">
                        <kbd>A6</kbd>
                        <div class="blackKey"></div>
                    </div>
                    <div class="key" data-key="103">
                        <kbd>B7</kbd>
                    </div>
            <div class="key" data-key="97">
                <kbd>C1</kbd>
                <div class="blackKey"></div>
            </div>
            <div class="key" data-key="98">
                <kbd>D2</kbd>
                <div class="blackKey"></div>
            </div>
            <div class="key" data-key="99">
                <kbd>E3</kbd>
            </div>
            <div class="key" data-key="100">
                <kbd>F4</kbd>
                <div class="blackKey"></div>
            </div>
            <div class="key" data-key="101">
                <kbd>G5</kbd>
                <div class="blackKey"></div>
            </div>
            <div class="key" data-key="102">
                <kbd>A6</kbd>
                <div class="blackKey"></div>
            </div>
            <div class="key" data-key="103">
                <kbd>B7</kbd>
            </div>
            <div class="key" data-key="97">
                    <kbd>C1</kbd>
                    <div class="blackKey"></div>
                </div>
                <div class="key" data-key="98">
                    <kbd>D2</kbd>
                    <div class="blackKey"></div>
                </div>
                <div class="key" data-key="99">
                    <kbd>E3</kbd>
                </div>
                <div class="key" data-key="100">
                    <kbd>F4</kbd>
                    <div class="blackKey"></div>
                </div>
                <div class="key" data-key="101">
                    <kbd>G5</kbd>
                    <div class="blackKey"></div>
                </div>
                <div class="key" data-key="102">
                    <kbd>A6</kbd>
                    <div class="blackKey"></div>
                </div>
                <div class="key" data-key="103">
                    <kbd>B7</kbd>
                </div>
        </div>

        <audio data-key="97" src="sounds/1_C.wav"></audio>
        <audio data-key="98" src="sounds/2_D.wav"></audio>
        <audio data-key="99" src="sounds/3_E.wav"></audio>
        <audio data-key="100" src="sounds/4_F.wav"></audio>
        <audio data-key="101" src="sounds/5_G.wav"></audio>
        <audio data-key="102" src="sounds/6_A.wav"></audio>
        <audio data-key="103" src="sounds/7_B.wav"></audio>

        <script>
            function removeTransition(event){
                if(event.propertyName !== 'transform') return;
                event.target.classList.remove('playing');
            }

            function playSound(event){
                const audio = document.querySelector(`audio[data-key = "${event.keyCode}"]`);
                const key = document.querySelector(`div[data-key = "${event.keyCode}"]`);
                if(!audio) return;

                key.classList.add('playing');
                audio.currentTime = 0;
                audio.play();
            }

            const keys = Array.from(document.querySelectorAll('.key'));
            keys.forEach(key => key.addEventListener('transitionend',removeTransition));
            window.addEventListener('keydown',playSound);
        </script>
        <!-- <div class="pianoKeys">
            <div class="key" data-key="97">
                <kbd>A</kbd>
                <span class="sound">clap</span>
            </div>
            <div data-key="98" class="key">
                <kbd>S</kbd>
                <span class="sound">hihat</span>
            </div>
            <div data-key="99" class="key">
                <kbd>D</kbd>
                <span class="sound">kick</span>
            </div>
            <div data-key="100" class="key">
                <kbd>F</kbd>
                <span class="sound">openhat</span>
            </div>
            <div data-key="101" class="key">
                <kbd>G</kbd>
                <span class="sound">boom</span>
            </div>
            <div data-key="102" class="key">
                <kbd>H</kbd>
                <span class="sound">ride</span>
            </div>
            <div data-key="103" class="key">
                <kbd>J</kbd>
                <span class="sound">snare</span>
            </div>
        </div>

        <audio data-key="97" src="sounds/1_C.wav"></audio>
  <audio data-key="98" src="sounds/2_D.wav"></audio>
  <audio data-key="99" src="sounds/3_E.wav"></audio>
  <audio data-key="100" src="sounds/4_F.wav"></audio>
  <audio data-key="101" src="sounds/5_G.wav"></audio>
  <audio data-key="102" src="sounds/6_A.wav"></audio>
  <audio data-key="103" src="sounds/7_B.wav"></audio>


  <script>
        function removeTransition(event) {
          if (event.propertyName !== 'transform') return; // 过滤其中一种事件
          event.target.classList.remove('playing'); // 移除高亮的样式
        }
      
        function playSound(event) {
          const audio = document.querySelector(`audio[data-key="${event.keyCode}"]`); // 根据触发按键的键码，获取对应音频
          const key = document.querySelector(`div[data-key="${event.keyCode}"]`); // 获取页面对应按钮 DIV 元素
          if (!audio) return; // 处理无效的按键事件
      
          key.classList.add('playing'); // 改变样式
          audio.currentTime = 0; // 每次播放之后都使音频播放进度归零
          audio.play(); // 播放相应音效
        }
      
        const keys = Array.from(document.querySelectorAll('.key')); // 获取页面所有按钮元素
        keys.forEach(key => key.addEventListener('transitionend', removeTransition)); // 添加 transition 事件监听
        window.addEventListener('keydown', playSound);
      </script> -->

    </body>

</html>